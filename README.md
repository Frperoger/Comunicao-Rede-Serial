# Comunição-Rede-Serial
Um script de comunicação que implementa comunicação em rede com auxílio de um comunicador serial `RS232 CNC<-->PC` que funciona transformando o computador em um `"servidor"`, deixando ele sempre ativo e esperando o CNC solicitar recebimento ou envio de um programa.

Pela parte do CNC deve-se configurar todo o envio de caracteres especiais pelo `LADDER` do mesmo; caso não tenha acesso a esse nível de proteção, não é recomendado tentar acessá-lo por outros meios (pode acabar danificando a máquina). Os caracteres especiais contidos no script são os mesmos que devem ser configurados no CNC em `ASCII` (por exemplo, a letra `"A"` seria equivalente a `"0xA"`). Com todos os parâmetros de comunicação devidamente configurados, a comunicação em rede será feita com o operador da máquina tomando as decisões. No caso de não ter acesso, deve-se configurar o script para receber o `handshake padrão` da máquina e não utilizar códigos M no CNC (O Repositório contém os dois programas, tanto Handshake com código M quanto Handshake padrão), o script reconhece qual máquina está enviando ou solicitando o arquivo com base no seu IP.

As configurações do `RS232` são como configurar uma rede `TCP/IP` sendo o conversor configurado como cliente já que o script funciona como servidor e recebe qualquer conexão da porta configurada, os pontos que se deve ter mais atenção são as velocidades de comunicação, que devem ser compatíveis com o configurado via parâmetro no CNC e script.

O script funciona da seguinte maneira, ele estará sempre ativo (recomendado transformá-lo em um arquivo que roda sempre que o computador estiver ligado, no Windows) e criará uma pasta no diretório designado com `ENVIAR` (arquivos que serão enviados para o CNC a partir do computador, onde o operador poderia fazer alterações na ordem). Assim que o CNC solicitar o recebimento do arquivo com o seu Handshake, ele puxará para da rede o primeiro programa dentro desta diretório e assim que terminar a transferência excluirá o mesmo do computador. Caso o código seja de `DNC` (Para programas muito grandes que não cabem na memória da máquina), o programa será rodado direto do computador sem que ocorra transferência do arquivo. A pasta `RECEBER` recebe os arquivos enviados do CNC para o computador sem necessidade de confirmação, o que define de onde vem o arquivo é dada pelo nome do programa que fica salvo em bloco de nota na pasta `CNC01(Data)` / `CNC02(Data)`. A pasta `LOG` guarda todos os registros dos eventos do script separados por CNC e seu estado atual na rede.

No script também tem uma pequena interface onde dá para monitorar o estado das máquinas o tempo todo.
